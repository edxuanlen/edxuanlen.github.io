---
title: 编码相关问题
author: edxuanlen
top: false
cover: false
toc: true
mathjax: false
date: 2020-08-07 10:39:08
img:
coverImg:
password:
summary:
tags:
    - JAVA
categories:
description: UTF-8, GBK, UNICODE等问题
---

英文字母：

字节数 : 1;编码：GB2312

字节数 : 1;编码：GBK

字节数 : 1;编码：GB18030

字节数 : 1;编码：ISO-8859-1

字节数 : 1;编码：UTF-8

字节数 : 4;编码：UTF-16

字节数 : 2;编码：UTF-16BE

字节数 : 2;编码：UTF-16LE  

中文汉字：

字节数 : 2;编码：GB2312

字节数 : 2;编码：GBK

字节数 : 2;编码：GB18030

字节数 : 1;编码：ISO-8859-1

字节数 : 3;编码：UTF-8

字节数 : 4;编码：UTF-16

字节数 : 2;编码：UTF-16BE

字节数 : 2;编码：UTF-16LE

## UTF-8

1. 中文字符2个字节？其实不一定的，这和编码方式有关，如果是gbk，一个中文是两个字节的；如果是utf-8，一个中文是三个字节的。  

utf-8就是Unicode最重要的实现方式之一。另外还有utf-16、utf-32等。UTF-8不是固定字长编码的，而是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。这是种比较巧妙的设计，如果一个字节的第一位是0，则这个字节单独就是一个字符；如果第一位是1，则连续有多少个1，就表示当前字符占用多少个字节。

## 测试"1a我"各种编码的占用字节数

```JAVA
String t = "1a我";
//通过getBytes方法获取默认的编码
System.out.println("默认编码格式:");
byte[] b = t.getBytes();//ASCII,GBK,UTF-8对数字和英文字母的编码相同,对汉字的编码不同,unicode的编码跟前面三项都不同
//打印默认编码
for (byte c : b) {
    System.out.print(c+",\t");
}
System.out.println();
//打印GBK编码
System.out.println("GBK编码格式:");
b = t.getBytes("GBK");
for (byte c : b) {
    System.out.print(c+",\t");
}
System.out.println();
//打印GBK编码
System.out.println("UTF-8编码格式:");
b = t.getBytes("UTF-8");
for (byte c : b) {
    System.out.print(c+",\t");
}
System.out.println();
//打印GBK编码
System.out.println("ASCII编码格式:");
b = t.getBytes("ASCII");
for (byte c : b) {
    System.out.print(c+",\t");
}
System.out.println();
//打印GBK编码
System.out.println("UNICODE编码格式:");
b = t.getBytes("UNICODE");
for (byte c : b) {
    System.out.print(c+",\t");
}
```

```text
系统默认编码：    UTF-8
系统默认字符编码:UTF-8
系统默认语言:en

默认编码格式:
49,	97,	-26, -120, -111,  
GBK编码格式:
49, 97, -50, -46,  
UTF-8编码格式:
49, 97, -26, -120, -111,  
ASCII编码格式:
49, 97, 63,  
UNICODE编码格式:
-2, -1, 0, 49, 0, 97, 98, 17,  
```

**String数据使用的编码格式同系统使用的编码相同. 而eclipse的话是根据Java 文件编码决定。**

## Stirng存不同的字符

```JAVA
char ch_en = 'A';
// char 存中文
char ch_zn = '中';
char ch_zn1 = '馹';

System.out.println("ch_en : " + utils.getEncoding(String.valueOf(ch_en)));
System.out.println("ch_zn: " + utils.getEncoding(String.valueOf(ch_zn)));
System.out.println("ch_zn1: " + utils.getEncoding(String.valueOf(ch_zn1)));
```

结果

```text
ch_en : A   GB2312  48
ch_zn: 中   GB2312  48
ch_zn1: 馹   UTF-8  48  // 自动转了UTf-8  
```

## 不同字符不同编码占用不同空间

String = "1234"

```text
utf-8: 4
ISO_8859_1: 4
GBK: 4
Unicode: 10 // 一个占两字节 -2，-1声明ff,fe格式
```

String = "一二三四1"

```text
默认: 13
utf-8: 13
ISO_8859_1: 5
GBK: 9
Unicode: 12
ASCII: 5
```

String = "魑魅魍魉闣"

```text
默认: 15
utf-8: 15
ISO_8859_1: 5
GBK: 10
Unicode: 12
ASCII: 5
```



